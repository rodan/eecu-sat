<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Process this file with
   groff -man -Tascii foo.1
   -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <style>
    table.head, table.foot { width: 100%; }
    td.head-rtitle, td.foot-os { text-align: right; }
    td.head-vol { text-align: center; }
    .Nd, .Bf, .Op { display: inline; }
    .Pa, .Ad { font-style: italic; }
    .Ms { font-weight: bold; }
    .Bl-diag > dt { font-weight: bold; }
    code.Nm, .Fl, .Cm, .Ic, code.In, .Fd, .Fn, .Cd { font-weight: bold;
      font-family: inherit; }
  </style>
  <title>eecu-sat(1)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">eecu-sat(1)</td>
    <td class="head-vol">General Commands Manual</td>
    <td class="head-rtitle">eecu-sat(1)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp">eecu-sat - (Engine Electronic Control Unit signal acquisition
    tool) software application that imports, calibrates, crops and splices Logic
    raw analog signals and converts them into sigrok-compatible session files
    that can be visualised in pulseview.</p>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<p class="Pp"><b>eecu-sat [-hv] [-i, --input</b> <i>FILENAME_MATCH</i> <b>] [-o,
    --output</b> <i>FILE_PREFIX</i> <b>] [-O, --output-format</b> <i>OUTPUT</i>
    <b>] [-t, --triggers</b> <i>TRIGGERS</i> <b>] [-T, --transform-module</b>
    <i>TRANSFORM</i> <b>] [-L, --list]</b></p>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp"><b>eecu-sat</b> imports raw analog signals generated by Logic,
    optionally applies a trigger that can crop a slice of it, optionally
    calibrates each channel of the signal via the transform module and in the
    end exorts the data either in raw analog format or as a sigrok session
  file.</p>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="OPTIONS"><a class="permalink" href="#OPTIONS">OPTIONS</a></h1>
<dl class="Bl-tag">
  <dt id="h"><a class="permalink" href="#h">-h</a></dt>
  <dd>Display short help message and exit</dd>
  <dt id="v"><a class="permalink" href="#v">-v</a></dt>
  <dd>Display application version</dd>
  <dt id="i,"><a class="permalink" href="#i,">-i, --input
    FILENAME_MATCH</a></dt>
  <dd>
    <p class="Pp">Imports either a singular file or a list of files defined by
        and extended pattern, see man 3 <i>fnmatch</i> <i>FNM_EXTMATCH</i> for
        details. the list is parsed in alpha-numerical order (analog_2 comes
        before analog_10).</p>
    <p class="Pp">default value is <b>analog_[0-9]*.bin</b></p>
    <p class="Pp"></p>
  </dd>
  <dt id="O,"><a class="permalink" href="#O,">-O, --output_format
    FORMAT</a></dt>
  <dd>
    <p class="Pp">Mandatory option that sets the export file format. the list of
        possible FORMATs is obtained by using <i>-L</i></p>
    <p class="Pp">the FORMAT argument can be followed by module-specific options
        by using the <i>:</i> separator.</p>
    <p class="Pp"><b>analog</b> - export is kept as a raw analog signal
        containing little-endian single precision floating-point data. the
        &lt;SALEAE&gt; header is copied over if it was present in the input
        file. see
        https://support.saleae.com/faq/technical-faq/binary-export-format-logic-2</p>
    <p class="Pp"><b>analog:channel_offset=NUM</b>
      <br/>
       - all exported channel identifiers get incremented by NUM. useful for
        creating sessions that contain signals from different captures.</p>
    <p class="Pp"><b>srzip</b> - sigrok session file. an archive containing
        non-interlaced channel data and information about the channel labeling
        and sample rate.</p>
    <p class="Pp"><b>srzip:metadata_file=FILE</b> - force the output module to
        use FILE as the metadata inside the srzip instead of automatically
        generating it. good for labeling the channels.</p>
    <p class="Pp"><b>calibrate_linear_3p:calib_file=FILE</b> - very specialised
        option that generates pairs of slope and offset for each channel - to be
        used to calibrate signals further on. this option needs a special signal
        input that features stable voltages of known values in the -0.6 - 0 -
        15V intervals. the parameters are to be used with a 3 point
        linear-interpolated calibration.</p>
    <p class="Pp"></p>
  </dd>
  <dt id="o,"><a class="permalink" href="#o,">-o, --output FILE_PREFIX</a></dt>
  <dd>
    <p class="Pp">either an exact filename (for srzip) or a prefix like
        'analog_' when used with --output-format analog. in the second case the
        channel identifier and the 'bin' extension is added automatically.</p>
    <p class="Pp"></p>
    <p class="Pp"></p>
  </dd>
  <dt id="t,"><a class="permalink" href="#t,">-t, --triggers TRIGGERS</a></dt>
  <dd>
    <p class="Pp">find samples that match a trigger definition. this can be used
        to export a cropped part of the signal.</p>
    <p class="Pp">the following sub-options need to be defined and separated by
        ':'</p>
    <p class="Pp"><b>ch=FILENAME:name=STR:type=CHAR:level=VOLTAGE:nth=INT:a=INT:b=INT</b></p>
    <p class="Pp"><b>ch=FILENAME</b> defines the signal channel on which the
        trigger will be set. it's actually a filename without any path.</p>
    <p class="Pp"><b>name=STR</b> a trigger name, like Jeff. good for better
        understanding possible errors or warnings that the application
      throws.</p>
    <p class="Pp"><b>type=CHAR</b> for analog signals TYPE it's either <b>o</b>
        or <b>u</b> so it's a rising signal over the defined level or a falling
        one respectively.</p>
    <p class="Pp"><b>level=X.YZ</b> an approximate (in floating-point terms)
        voltage at which the trigger should occur. this voltage is read directly
        from the input source, since the triggering module is run before the
        transformation module.</p>
    <p class="Pp"><b>nth=INT</b> a positive integer sets the final trigger once
        the definition was matched an INT number of times.</p>
    <p class="Pp"><b>b=INT</b> crop the signal INT number of samples before the
        trigger</p>
    <p class="Pp"><b>a=INT</b> crop the signal INT number of samples after the
        trigger</p>
    <p class="Pp"></p>
  </dd>
  <dt id="T,"><a class="permalink" href="#T,">-T, --transform-module
    TRANSFORM</a></dt>
  <dd>Optional module that performs a transformation of the input data. the list
      of possible TRANSFORMs is obtained by using <i>-L</i>
    <p class="Pp">the TRANSFORM argument can be followed by module-specific
        options by using the <i>:</i> separator.</p>
    <p class="Pp"><b>calibrate_linear_3p:calib_file=FILE</b>
      <br/>
       - use the parameters provided in FILE in order to perform a 3 point
        linear-interpolated calibration of the input signal</p>
    <p class="Pp">the calib_file format is as follows:</p>
    <p class="Pp"></p>
    <pre>--------- calib.ini ----- &gt;8 --------------------------
[globals]
r_0 = 0.0             # source voltage, 1st point
r_1 = 1.6             # source voltage, 2nd point
r_2 = 8.0             # source voltage, 3rd point
r_acc = 0.1           # match accuracy in volts
r_stab = 0.01         # stability criteria
r_stab_cnt = 10000    # minimal number of stable samples
r_oob_floor = -10.0   # out-of-bounds lower limit
r_oob_ceil = 10.0     # out-of-bounds upper limit
t_0 = 0.0             # target voltage, 1st point
t_1 = 2.4997          # target voltage, 2nd point
t_2 = 11.974          # target voltage, 3rd point
[CH1]
type=1                # calibration type - 3p linear
midpoint=1.667258     # 2nd point source voltage
slope_0=1.503436      # params for 1st 2p calib
offset_0=-0.006914    # -/-
slope_1=1.501993      # params for 2nd 2p calib
offset_1=-0.004509    # -/-
[CH2]                 # repeat for all channels
type=1
[..]
------------------------ 8&lt; ---------------------------
    </pre>
    <p class="Pp"></p>
  </dd>
  <dt id="L,"><a class="permalink" href="#L,">-L, --list</a></dt>
  <dd>Provides a list of output and transformation modules that have been
      compiled into the application.
    <p class="Pp"></p>
  </dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLE"><a class="permalink" href="#EXAMPLE">EXAMPLE</a></h1>
<p class="Pp">get all raw analog files defined by analog_[0-9]*.bin, crop the
    signal based on a trigger on the 6th channel (when the signal rises above
    3.4V the 11th time and keep 5000 samples before the trigger and 1000 after
    it). then calibrate this signal slice and use a custom metadata in the
    output session file:</p>
<p class="Pp"></p>
<pre>eecu-sat -i &quot;${sample_dir}/analog_[0-9]*.bin&quot; -t &quot;ch=analog_5.bin:type=o:level=3.40:name=jeff:nth=11:b=5000:a=1000&quot; --transform-module &quot;calibrate_linear_3p:calib_file=${sample_dir}/calib_reference.ini&quot; -o ./calibrated.sr --output-format &quot;srzip:metadata_file=${sample_dir}/metadata_16ch&quot;
</pre>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="DIAGNOSTICS"><a class="permalink" href="#DIAGNOSTICS">DIAGNOSTICS</a></h1>
<p class="Pp">errors are generated on stderr if any of the system calls returns
    a failure.</p>
<p class="Pp"></p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp">please report any bugs via the github tracker located at
    &lt;https://github.com/rodan/eecu-sat/issues&gt;</p>
</section>
<section class="Sh">
<h1 class="Sh" id="LICENSE"><a class="permalink" href="#LICENSE">LICENSE</a></h1>
<p class="Pp"><b>eecu-sat</b> is covered by the GNU General Public License
    (GPLv3 or later).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHOR"><a class="permalink" href="#AUTHOR">AUTHOR</a></h1>
<p class="Pp">Petre Rodan &lt;2b4eda@subdimension.ro&gt;</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><b>fnmatch</b>(3) , <b>sigrok-cli</b>(1) , <b>pulseview</b>(1)</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">SEPTEMBER 2024</td>
    <td class="foot-os"></td>
  </tr>
</table>
</body>
</html>
